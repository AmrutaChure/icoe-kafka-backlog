name: Auto-close issues when project Status is "Done"

on:
  schedule:
    - cron: '*/15 * * * *'  # Runs every 15 minutes
  workflow_dispatch:        # Allows manual trigger

jobs:
  close_done_issues:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read

    steps:
      - name: Close issues with Status = Done
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const org = 'kafkaNchai'; // <-- Your GitHub username
            const projectNumber = 4;  // <-- Your project number
            const statusFieldName = 'Status';
